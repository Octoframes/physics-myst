<!DOCTYPE html><html lang="en" class="light scroll-p-20"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>undefined - undefined</title><meta property="og:title" content="undefined - undefined"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="undefined - undefined"/><meta name="twitter:alt" content="undefined - undefined"/><link rel="stylesheet" href="/physicsmyst/build/_assets/app-GBHXBS6U.css"/><link rel="stylesheet" href="/physicsmyst/build/_assets/thebe-core-BKMFZL7Z.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 fixed w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-wrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center"><div class="block xl:hidden"><button class="flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" class="h-8 w-8 p-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zM3 12a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="flex items-center dark:text-white w-fit ml-3 md:ml-5 xl:ml-7" href="/physicsmyst/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex-grow flex items-center w-auto"><div class="text-md flex-grow hidden lg:block"></div><div class="block flex-grow"></div><button class="theme rounded-full border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 mx-3 h-8 w-8" title="Change theme to dark mode." aria-label="Change theme to dark mode."><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="h-full w-full p-0.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"></path></svg></button><div class="block sm:hidden"><div class="relative" data-headlessui-state=""><div><button class="bg-transparent flex text-sm rounded-full focus:outline-none" id="headlessui-menu-button-:Rcikp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Open Menu</span><div class="flex items-center text-stone-200 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" class="h-8 w-8 p-1"><path fill-rule="evenodd" d="M10.5 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm0 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm0 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z" clip-rule="evenodd"></path></svg></div></button></div></div></div><div class="hidden sm:block"><a href="https://myst.tools/docs/mystjs" target="_blank" rel="noopener noreferrer" class="inline-block text-md px-4 py-2 mx-1 leading-none border rounded border-stone-700 dark:border-white text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 hover:bg-neutral-100 mt-0">Learn More</a></div></div></nav></div><article class="article content article-grid article-grid-gap" style="margin-top:80px"><main class="article-grid article-subgrid-gap col-screen"><div class="mb-8"><div class="flex mt-3 mb-5 text-sm font-light items-center h-6"><div class="flex-grow"></div><a href="https://github.com/Octoframes/physicsmyst" title="GitHub Repository: Octoframes/physicsmyst" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" class="w-5 h-5 mr-1 inline-block opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" class="h-5 w-5 inline-block"><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="flex relative grow-0 inline-block mx-1" data-headlessui-state=""><button class="relative" id="headlessui-menu-button-:R61b4p:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-5 h-5 ml-2 -mr-1"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div></div><div class="flex items-center"><div class="flex-grow"></div></div><div id="d55jwLbfWR" class="relative group/block article-grid article-subgrid-gap col-screen"><div id="nb-cell-0-05330fc8bf-code" class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre style="display:block;overflow-x:auto;padding:0.8rem;background:transparent;color:black"><code class="language-python" style="white-space:pre">from typing import DefaultDict
from manim import *
import subprocess, sys
import numpy as np
import math

config.media_embed = True

from collections import defaultdict

#############################################
# Generalized N pendulum
#############################################
class Pendulum:
    def __init__(self, N, theta=None):
        self.N = N;
        self.gravity = 9.81
        self.L = np.ones(shape=(N, )) # lengths
        self.m = np.ones(shape=(N, )) # masses
        
        self.theta = np.zeros(shape=(N, )) if theta is None else theta
        self.theta_dot = np.zeros(shape=(N, ))

    def step(self, delta_t):
        equations = np.zeros(shape=(4 * self.N, 4 * self.N + 1))
        theta_dd = 0
        a_xn = theta_dd + self.N
        a_yn = a_xn + self.N
        T_n = a_yn + self.N
        for p in range(0, 4 * self.N, 4):
            n = p // 4
            # First equation x_dd
            equations[p, theta_dd + n] = self.L[n] * math.cos(self.theta[n])
            equations[p, a_xn + n] = -1.0;
            if n &gt; 0:
                equations[p, a_xn + n - 1] = 1
            equations[p, -1] = self.theta_dot[n]**2 * math.sin(self.theta[n])

            # Second equation y_dd
            equations[p + 1, theta_dd + n] = -1.0 * self.L[n] * math.sin(self.theta[n])
            equations[p + 1, a_yn + n] = -1.0
            if n &gt; 0:
                equations[p + 1, a_yn + n - 1] = 1.0
            equations[p + 1, -1] = self.theta_dot[n]**2 * math.cos(self.theta[n])

            # Third equation horizontal tension
            equations[p + 2, a_xn + n] = self.m[n]
            equations[p + 2, T_n + n] = math.sin(self.theta[n])
            if n + 1 &lt; self.N:
                equations[p + 2, T_n + n + 1] = -1.0 * math.sin(self.theta[n + 1])
            equations[p + 2, -1] = 0

            # Fourth equation vertical tension
            equations[p + 3, a_yn + n] = self.m[n]
            equations[p + 3, T_n + n] = math.cos(self.theta[n])
            if n + 1 &lt; self.N:
                equations[p + 3, T_n + n + 1] = -1.0 * math.cos(self.theta[n + 1])
            equations[p + 3, -1] = self.m[n] * self.gravity

        solution = np.linalg.solve(equations[:, 0:-1], equations[:, -1])
        self.theta_dot += delta_t * solution[0:self.N]
        self.theta += delta_t * self.theta_dot


class PhysicalNPendulum(Scene):
    def construct(self):
        p = Pendulum(N=2, theta=[math.pi / 2] * 2)
        scale = 2
        x_c, y_c = 0, 3

        def get_pendulum(dot_radius=DEFAULT_DOT_RADIUS):
            points = [[x_c, y_c, 0]] + [[scale * p.L[n] * math.sin(p.theta[n]), -scale * p.L[n] * math.cos(p.theta[n]), 0] for n in range(p.N)]
            for i in range(1, len(points)):
                for k in range(3):
                    points[i][k] += points[i - 1][k]
            return [ Line(points[i - 1], points[i]) for i in range(1, len(points)) ] + [ Dot(point, radius=dot_radius) for point in points]

        def step(pendulum, dt):
            for obj in pendulum:
                pendulum.remove(obj)
            p.step(dt / 2)
            for obj in get_pendulum(dot_radius=0.06):
                pendulum.add(obj)

        pendulum = VGroup()
        for obj in get_pendulum():
            pendulum.add(obj)
        pendulum.add_updater(step)
        self.add(pendulum)
        self.wait(5)
        pendulum.remove_updater(step)


param= &quot;-v WARNING  --progress_bar None   -r  500,200 --fps=3 --disable_caching PhysicalNPendulum&quot;
paramgif= &quot;-v WARNING  --progress_bar None --format=gif  -r  500,200  --disable_caching PhysicalNPendulum&quot;
%manim $param</code></pre><div class="absolute hidden top-1 right-1 group-hover:block"><button title="Copy to Clipboard" class="inline-flex items-center opacity-60 hover:opacity-100 active:opacity-40 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-500 border-blue-500" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-[24px] h-[24px]"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"></path></svg></button></div></div><figure id="nb-cell-0-05330fc8bf-output" data-mdast-node-type="output" data-mdast-node-id="MRdGEPo0He" class="max-w-full overflow-visible m-0 group not-prose relative text-left"><div><div class="p-2.5">Loading...</div></div></figure><div class="hidden group-hover/block:flex md:flex-col absolute -top-[28px] md:top-0 right-0 md:-right-[28px] mt-8"></div></div><div id="DuTfSQiKwd" class="relative group/block article-grid article-subgrid-gap col-screen"><div id="nb-cell-1-f9b4f66a5a-code" class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre style="display:block;overflow-x:auto;padding:0.8rem;background:transparent;color:black"><code class="language-python" style="white-space:pre">################################################
# Optimized collection of 2-Pendulum&#x27;s
################################################
class DoublePendulum():
    &quot;&quot;&quot; Creates a collection of 2-Pendulums
        Parameters:
        theta: np.ndarray with shape (N, 2)
        lengths (optional): np.ndarray with shape (N, 2) default is all ones
        masses  (optional): np.ndarray with shape (N, 2) default is all ones
    &quot;&quot;&quot;
    def __init__(self, theta, lengths=None, masses=None):
        self.t = theta
        self.t_d = np.zeros(theta.shape)
        self.l = np.ones(theta.shape) if lengths is None else lengths
        self.m = np.ones(theta.shape) if masses is None else masses
        self.g = 9.81 # gravity

    def step(self, delta_t, step_size=0.0005):
        for i in range(math.ceil(delta_t / step_size)):
            self.smol_step(step_size)

    def smol_step(self, delta_t):
        m_1, m_2 = self.m[:, 0], self.m[:, 1]
        t_1, t_2 = self.t[:, 0], self.t[:, 1]
        l_1, l_2 = self.l[:, 0], self.l[:, 1]
        t_d1, t_d2 = self.t_d[:, 0], self.t_d[:, 1]
        bottom = (2 * m_1) + m_2 - (m_2 * np.cos(2 * (t_1 - t_2)))
        theta_dd1 = (-self.g * (2 * m_1 + m_2) * np.sin(t_1) - m_2 * self.g * np.sin(t_1 - 2 * t_2) - 2 * np.sin(t_1 - t_2) * m_2 * (t_d2**2 * l_2 + t_d1**2 * l_1 * np.cos(t_1 - t_2))) / (l_1 * bottom)
        theta_dd2 = (2 * np.sin(t_1 - t_2) * (t_d1**2 * l_1 * (m_1 + m_2) + self.g * (m_1 + m_2) * np.cos(t_1) + t_d2**2 * l_2 * m_2 * np.cos(t_1 - t_2))) / (l_2 * bottom)
        self.t_d[:, 0] += delta_t * theta_dd1
        self.t_d[:, 1] += delta_t * theta_dd2
        self.t += delta_t * self.t_d

    def get_nth_pendulum(self, n):
        return self.t[n, 0], self.t[n, 1]


class Physical2Pendulum(Scene):
    def construct(self):
        ps = [0, 3, 0]
        scale = 2.5
        angles = True
        history = defaultdict(lambda: [])
        theta_hist = defaultdict(lambda: [])
        theta1 = MathTex(r&quot;\theta_1&quot;)
        theta2 = MathTex(r&quot;\theta_2&quot;)

        def mod_clamp(x, low=-math.pi, high=math.pi):
            return ((x-((high-low)/2)) % (high-low)) + low
        
        def lin_scale(x, start, end):
            return (x - start) / (end - start)

        def get_between(start, end, proportion):
            return start + (end - start) * proportion

        def get_pendulum(p, pid, tracers=False, color=BLUE, dot_radius=DEFAULT_DOT_RADIUS):
            t_1, t_2 = p.get_nth_pendulum(0)
            p0 = [ps[0] + scale * math.sin(t_1), ps[1] - scale * math.cos(t_1), 0]
            p1 = [p0[0] + scale * math.sin(t_2), p0[1] - scale * math.cos(t_2), 0]
            x0, x1 = DashedLine([ps[0], ps[1], 0], [ps[0], ps[1] - 1, 0]), DashedLine([p0[0], p0[1], 0], [p0[0], p0[1] - 1, 0])
            l0, l1 = Line(ps, p0), Line(p0, p1)
            x0.set_color(color)
            x1.set_color(color)
            l0.set_color(color)
            l1.set_color(color)

            theta_hist[pid].append(np.array([lin_scale(mod_clamp(t_1), -math.pi, math.pi), lin_scale(mod_clamp(t_2), -math.pi, math.pi), 0]))
            history[pid].append(p1)
            if len(history[pid]) &gt; 10:
                history[pid] = history[pid][1:]

            res = [ l0, l1, Dot(ps, radius=dot_radius, color=WHITE), Dot(p0, radius=dot_radius, color=color), Dot(p1, radius=dot_radius, color=color)]
            if angles:
                flip0, flip1 = p0[0] &lt; ps[0], p1[0] &lt; p0[0]
                res += [ x0, x1, Angle(x0, l0, other_angle=flip0), Angle(x1, l1, other_angle=flip1),
                    MathTex(r&quot;\theta_1&quot;).move_to(Angle(x0, l0, other_angle=flip0, radius=0.4 + 3 * SMALL_BUFF).point_from_proportion(0.5)),
                    MathTex(r&quot;\theta_2&quot;).move_to(Angle(x1, l1, other_angle=flip1, radius=0.4 + 3 * SMALL_BUFF).point_from_proportion(0.5))]
            if tracers:
                res += [ Line(history[pid][i-1], history[pid][i], color=color) for i in range(1, len(history[pid])) ]
            return res


        def create_pendulum(theta, pid=0, color=BLUE, rate=1, add_updater=True, tracers=True):
            p = DoublePendulum(theta)
            pendulum = VGroup()
            history[pid].clear()
            for obj in get_pendulum(p, pid, color=color, dot_radius=0.06):
                pendulum.add(obj)

            def step(pendulum, dt):
                clear(pendulum)
                p.step(dt * rate)
                for obj in get_pendulum(p, pid, color=color, tracers=tracers, dot_radius=0.06):
                    pendulum.add(obj)

            if add_updater:
                pendulum.add_updater(step)
            return p, pendulum, step

        def clear(*objs):
            for obj in objs:
                for o in obj:
                    obj.remove(o)

        def create_pendulum_path(pid, color, s, e):
            path = VGroup()

            def update(pth, dt):
                clear(pth)
                for obj in get_plot_line(pid, s, e, color):
                    pth.add(obj)
            path.add_updater(update)
            return path, update

        def get_plot_line(pid, domain_start, domain_end, color):
            res = []
            for i in range(1, len(theta_hist[pid])):
                p0 = domain_start + theta_hist[pid][i - 1] * (domain_end - domain_start)
                p1 = domain_start + theta_hist[pid][i] * (domain_end - domain_start)
                if np.linalg.norm(p1 - p0) &lt;= 4:
                    res.append(Line(p0, p1, color=color))
            return res

        def get_color(theta, phi, radius=127, normalize=False):
            return [(127 + radius * math.cos(phi) * math.sin(theta)) / 255, 
                (127 + radius * math.sin(phi) * math.sin(theta)) / 255,
                (127 + radius * math.cos(theta)) / 255] if normalize else \
            [math.floor(127 + radius * math.cos(phi) * math.sin(theta)), 
                math.floor(127 + radius * math.sin(phi) * math.sin(theta)),
                math.floor(127 + radius * math.cos(theta))]

        def get_coloring(grid_size):
            data = [[get_color(get_between(-math.pi, math.pi, i / (grid_size - 1)), get_between(math.pi, -math.pi, j / (grid_size - 1))) for i in range(grid_size)] for j in range(grid_size)]
            return ImageMobject(np.uint8(data))

        def update_color(object, pid, add_updater=True):
            def update(obj, dt):
                if len(theta_hist[pid]) &gt;= 1:
                    obj.set_fill(rgb_to_color(get_color(get_between(-math.pi, math.pi, theta_hist[pid][-1][0]), get_between(-math.pi, math.pi, theta_hist[pid][-1][1]), normalize=True)))
            if add_updater:
                object.add_updater(update)
            return update
        
        def update_circle_pos(obj, pid, s, e, add_updater=True):
            def update(my_obj, dt):
                if len(theta_hist[pid]) &gt;= 1:
                    my_obj.move_to(s + theta_hist[pid][-1] * (e - s))
            if add_updater:
                obj.add_updater(update)
            return update


        text1 = Tex(&quot;This is a double pendulum.&quot;).move_to([0, -3, 0])
        text2 = Tex(&quot;Its behavior is chaotic.&quot;).move_to([0, -3, 0])
        text3 = Tex(r&quot;This means that small changes to the initial conditions \\ result in wildly different behaviors.&quot;).move_to([0, -3, 0])
        text4 = Tex(&quot;Let&#x27;s see this happen.&quot;).move_to([0, -3, 0])
        text5 = Tex(r&quot;Let&#x27;s do this again, but plot \\ how the angles of each \\ pendulum change over time.&quot;).to_corner(LEFT * 0.5 + DOWN)
        text6 = Tex(r&quot;Let&#x27;s assign a unique color to each point on our plot.&quot;).move_to([0, -3.5, 0])
        text7 = Tex(r&quot;The pendulum&#x27;s state $(\theta_1, \theta_2)$ can be mapped to a color&quot;).move_to([0, -3.5, 0])

        p, pendulum, s = create_pendulum(np.ones((1, 2)) * math.pi / 2.0, BLUE, add_updater=False)
        self.add(pendulum)
        self.play( Create(pendulum) )
        self.play( Create(text1) )
        pendulum.add_updater(s)
        self.wait(4)

        clear(pendulum)
        self.play( Transform(text1, text2) )
        self.wait(5)

        clear(pendulum)
        self.play( Transform(text1, text3) )
        self.wait(6)
        pendulum.remove_updater(s)
        self.play(FadeOut(pendulum))
        self.remove(pendulum)

        #######################################################################
        angles = False
        p1, pendulum1, s1 = create_pendulum(np.ones((1, 2)) * math.pi / 2.0, pid=1, color=BLUE, add_updater=False)
        p2, pendulum2, s2 = create_pendulum(np.ones((1, 2)) * math.pi / 1.9, pid=2, color=ORANGE, add_updater=False)
        self.add(pendulum1, pendulum2)
        self.play( Create(pendulum1), Create(pendulum2), Transform(text1, text4) )
        pendulum1.add_updater(s1)
        pendulum2.add_updater(s2)
        self.wait(15)
        pendulum1.remove_updater(s1)
        pendulum2.remove_updater(s2)
        self.play(FadeOut(pendulum1), FadeOut(pendulum2))
        self.remove(pendulum1, pendulum2)

        #######################################################################
        plot = Square(side_length=6.5).to_corner(RIGHT + UP)
        t1, t2 = MathTex(r&quot;\theta_1&quot;).shift(3.3611 * RIGHT + 3.5 * DOWN), MathTex(r&quot;\theta_2&quot;).move_to([-0.3, 0.25, 0])
        p_pi1, m_pi1 = MathTex(r&quot;\pi&quot;).move_to([-0.2, 3.5, 0]), MathTex(r&quot;-\pi&quot;).move_to([0.1111, -3.25, 0])
        p_pi2 = MathTex(r&quot;\pi&quot;).move_to([6.61111, -3.25, 0])
        self.add(plot, t1, t2)
        self.play( Transform(text1, text5), Create(plot),
            Create(t1), Create(t2),
            Create(p_pi1), Create(m_pi1),
            Create(p_pi2)
        )

        p_start = np.array([0.11111, -3, 0])
        p_end = np.array([6.6111, 3.5, 0])
        ps = [-3.5, 3, 0]
        scale = 1.7
        p1, pendulum1, s1 = create_pendulum(np.ones((1, 2)) * math.pi / 2.0, pid=3, color=BLUE, add_updater=False)
        p2, pendulum2, s2 = create_pendulum(np.ones((1, 2)) * math.pi / 1.9, pid=4, color=ORANGE, add_updater=False)
        path1, p_s1 = create_pendulum_path(3, BLUE, p_start, p_end)
        path2, p_s2 = create_pendulum_path(4, ORANGE, p_start, p_end)
        self.add(pendulum1, pendulum2, path1, path2)
        self.play( Create(pendulum1) )
        self.wait(1)
        pendulum1.add_updater(s1)
        pendulum2.add_updater(s2)
        self.wait(18)
        pendulum1.remove_updater(s1)
        pendulum2.remove_updater(s2)
        path1.remove_updater(p_s1)
        path2.remove_updater(p_s2)
        self.play(FadeOut(pendulum1), FadeOut(pendulum2), FadeOut(path1), FadeOut(path2))
        self.play(Transform(text1, text6), FadeOut(p_pi1), FadeOut(p_pi2), FadeOut(m_pi1), FadeOut(t1), FadeOut(t2))
        self.remove(pendulum1, pendulum2, path1, path2)
        
        #######################################################################
        angles = True
        grid_size = 878
        ps = [-3.5, 3, 0]
        scale = 1.7
        p, pendulum, s = create_pendulum(np.ones((1, 2)) * math.pi / 2.0, pid=5, color=BLUE, add_updater=False, tracers=False)
        coloring = get_coloring(grid_size).scale(270 / grid_size * 6.45 / 2).to_corner(LEFT + UP)
        text_mapping = MathTex(r&quot;(\theta_1, \theta_2) \to &quot;).to_corner(LEFT * 2 + DOWN * 2)
        square_fill = Square(0.5, fill_opacity=1).move_to([-3.5, -2.75, 0])
        square_fill.set_fill(rgb_to_color(get_color(math.pi / 2, math.pi / 2, normalize=True)))
        lens = Circle(radius=0.3, fill_opacity=1, color=WHITE).move_to(p_start + (p_end - p_start) * np.array([lin_scale(mod_clamp(math.pi / 2), -math.pi, math.pi), lin_scale(mod_clamp(math.pi / 2), -math.pi, math.pi), 0]))
        lens.set_fill(rgb_to_color(get_color(math.pi / 2, math.pi / 2, normalize=True)))
        self.wait(1)
        self.add(coloring)
        self.play( coloring.animate.move_to([0.11111 + 6.5 / 2, -3 + 6.5 / 2, 0]))
        self.wait(3)
        self.add(pendulum)
        self.play( Create(pendulum), Transform(text1, text7))
        self.wait(2)
        self.play( Create(text_mapping), Create(square_fill), Create(lens) )
        self.wait(2)
        sf_u = update_color(square_fill, 5, add_updater=True)
        l_u = update_color(lens, 5, add_updater=True)
        l_u2 = update_circle_pos(lens, 5, p_start, p_end, add_updater=True)
        pendulum.add_updater(s)
        self.wait(20)
        pendulum.remove_updater(s)
        lens.remove_updater(l_u)
        lens.remove_updater(l_u2)
        square_fill.remove_updater(sf_u)
        self.play( FadeOut(lens), FadeOut(square_fill), FadeOut(pendulum), FadeOut(coloring), FadeOut(text_mapping), FadeOut(text1), FadeOut(plot))
        self.remove(lens, square_fill, pendulum, coloring, text_mapping, text1, plot)
        self.wait(1)



class FractalPlot(Scene):
    def construct(self):
        grid_size = 945
        angle_domain = [-math.pi, math.pi]
        angle_from_proportion = lambda x: (angle_domain[1] - angle_domain[0]) * x + angle_domain[0]
        theta = np.ones((grid_size**2, 2))
        for i in range(grid_size**2):
            x, y = i % grid_size, i // grid_size
            theta[i, 0] = angle_from_proportion(x / grid_size)
            theta[i, 1] = angle_from_proportion(y / grid_size)
        p = DoublePendulum(theta)

        def get_color(theta, phi, radius=127):
            return [math.floor(127 + radius * math.cos(phi) * math.sin(theta)), 
                math.floor(127 + radius * math.sin(phi) * math.sin(theta)),
                math.floor(127 + radius * math.cos(theta))]

        def get_fractal():
            return np.uint8([[get_color(p.t[j * grid_size + i, 0], p.t[j * grid_size + i, 1]) for i in range(grid_size)] for j in range(grid_size)])

        def step(fractal, dt):
            p.step(dt)
            fractal.pixel_array = np.array(get_fractal())
            fractal.change_to_rgba_array()

        text1 = Tex(&quot;Now, lets see how every possible pendulum evolves together.&quot;).move_to([0, -3.5, 0])
        text2 = Tex(&quot;Every pixel represents the state of a unique pendulum&quot;).move_to([0, -3.5, 0])
        text3 = Tex(&quot;We can update every pendulum and see how the states change.&quot;).move_to([0, -3.5, 0])
        # One unit is 270 px
        fractal = ImageMobject(get_fractal()).scale(270 / grid_size * 7 / 2).to_edge(UP * 0.25)
        self.add(fractal)
        self.add(text1)
        self.wait(5)
        self.play( Transform(text1, text2) )
        self.wait(5)
        self.play( Transform(text1, text3) )
        self.wait(2)
        fractal.add_updater(step)
        self.wait(30)
        fractal.remove_updater(step)
        self.play(FadeOut(fractal), FadeOut(text1))
        self.clear()
        self.wait(3)


param= &quot;-v WARNING  --progress_bar None   -r  500,200 --fps=3 --disable_caching Physical2Pendulum&quot;
# paramgif= &quot;-v WARNING  --progress_bar None --format=gif  -r  500,200  --disable_caching PhysicalNPendulum&quot;
%manim $param</code></pre><div class="absolute hidden top-1 right-1 group-hover:block"><button title="Copy to Clipboard" class="inline-flex items-center opacity-60 hover:opacity-100 active:opacity-40 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-500 border-blue-500" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-[24px] h-[24px]"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"></path></svg></button></div></div><figure id="nb-cell-1-f9b4f66a5a-output" data-mdast-node-type="output" data-mdast-node-id="Y2sDd1R8l0" class="max-w-full overflow-visible m-0 group not-prose relative text-left"><div><div class="p-2.5">Loading...</div></div></figure><div class="hidden group-hover/block:flex md:flex-col absolute -top-[28px] md:top-0 right-0 md:-right-[28px] mt-8"></div></div><div class="flex space-x-4 pt-10 mb-10"><a class="group flex-1 p-4 block border font-normal hover:border-blue-600 dark:hover:border-blue-400 no-underline hover:text-blue-600 dark:hover:text-blue-400 text-gray-600 dark:text-gray-100 border-gray-200 dark:border-gray-500 rounded shadow-sm hover:shadow-lg dark:shadow-neutral-700" href="/physicsmyst/media-notebook"><div class="flex align-middle h-full"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-6 h-6 self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="text-xs text-gray-500 dark:text-gray-400">Minimal Example</div>media-notebook</div></div></a><a class="group flex-1 p-4 block border font-normal hover:border-blue-600 dark:hover:border-blue-400 no-underline hover:text-blue-600 dark:hover:text-blue-400 text-gray-600 dark:text-gray-100 border-gray-200 dark:border-gray-500 rounded shadow-sm hover:shadow-lg dark:shadow-neutral-700" href="/physicsmyst/wave"><div class="flex align-middle h-full"><div class="flex-grow"><div class="text-xs text-gray-500 dark:text-gray-400">Minimal Example</div>wave</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-6 h-6 self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path></svg></div></a></div><nav style="display:none"></nav></main></article><div class="fixed xl:article-grid article-grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden" style="top:60px"><div class="pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><nav aria-label="Table of Contents" class="flex-grow overflow-y-auto transition-opacity mt-6 pb-3 ml-3 xl:ml-0 mr-3 max-w-[350px]"><ul class="space-y-6 lg:space-y-2"><li class="text-slate-900 leading-5 dark:text-slate-100 font-semibold"><a title="Minimal Example" class="block break-words mb-8 lg:mb-3 font-semibold text-slate-900 dark:text-slate-200 border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/physicsmyst/">Minimal Example</a></li><li class=""><a title="media-notebook" class="block break-words border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/physicsmyst/media-notebook">media-notebook</a></li><li class=""><a title="pendulum" class="block break-words border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/physicsmyst/pendulum">pendulum</a></li><li class=""><a title="wave" class="block break-words border-l pl-4 border-transparent hover:border-slate-400 dark:hover:border-slate-500 text-slate-700 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300" href="/physicsmyst/wave">wave</a></li></ul></nav><div class="flex-none py-4 opacity-0 transition-all duration-700 translate-y-6"><a class="flex w-fit mx-auto text-gray-700 hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://myst-tools.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center text-sm ml-2">Made with MyST</span></a></div></div></div><script>((u,f)=>{if(!window.history.state||!window.history.state.key){let m=Math.random().toString(32).slice(2);window.history.replaceState({key:m},"")}try{let b=JSON.parse(sessionStorage.getItem(u)||"{}")[f||window.history.state.key];typeof b=="number"&&window.scrollTo(0,b)}catch(m){console.error(m),sessionStorage.removeItem(u)}})("positions", null)</script><link rel="modulepreload" href="/physicsmyst/build/entry.client-ORTQVTK7.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-OLPNTUAB.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-RMYRWJKG.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-JCUQPVVQ.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-MS5GPXLY.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-C2JTSHFY.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-FELLYZ4U.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-QBZQYMPJ.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-E3SROWSD.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-PI7T3BDG.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-DU6O2KDC.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-STSN7GC4.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-ZQJ2EPTG.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-XIQ6U4TB.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-GTUSQ763.js"/><link rel="modulepreload" href="/physicsmyst/build/root-SUHMEADM.js"/><link rel="modulepreload" href="/physicsmyst/build/_shared/chunk-IXWKX6A7.js"/><link rel="modulepreload" href="/physicsmyst/build/routes/$-67EP337V.js"/><script>window.__remixContext = {"state":{"loaderData":{"root":{"theme":"light","config":{"myst":"v1","nav":[],"actions":[{"title":"Learn More","url":"https://myst.tools/docs/mystjs"}],"projects":[{"title":"Minimal Example","authors":[],"github":"https://github.com/Octoframes/physicsmyst","keywords":[],"bibliography":[],"index":"hello","pages":[{"slug":"media-notebook","title":"media-notebook","description":"","date":"","thumbnail":"","thumbnailOptimized":"","tags":[],"level":1},{"slug":"pendulum","title":"pendulum","description":"","date":"","thumbnail":"","thumbnailOptimized":"","tags":[],"level":1},{"slug":"wave","title":"wave","description":"","date":"","thumbnail":"","thumbnailOptimized":"","tags":[],"level":1}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/physicsmyst"},"routes/$":{"kind":"Notebook","sha256":"e58a4ea11ab1ac8078147ef8ed3f7585562f98ce1d389c4e05a12eb885b70629","slug":"pendulum","dependencies":[],"frontmatter":{"authors":[],"github":"https://github.com/Octoframes/physicsmyst","keywords":[],"exports":[{"format":"ipynb","filename":"pendulum.ipynb","url":"/physicsmyst/build/pendulum-e3767c1f8a58d7b85bed375eead39538.ipynb"}]},"mdast":{"type":"root","children":[{"type":"block","position":{"start":{"line":0,"column":0},"end":{"line":1,"column":0}},"children":[{"type":"code","lang":"python","executable":true,"value":"from typing import DefaultDict\nfrom manim import *\nimport subprocess, sys\nimport numpy as np\nimport math\n\nconfig.media_embed = True\n\nfrom collections import defaultdict\n\n#############################################\n# Generalized N pendulum\n#############################################\nclass Pendulum:\n    def __init__(self, N, theta=None):\n        self.N = N;\n        self.gravity = 9.81\n        self.L = np.ones(shape=(N, )) # lengths\n        self.m = np.ones(shape=(N, )) # masses\n        \n        self.theta = np.zeros(shape=(N, )) if theta is None else theta\n        self.theta_dot = np.zeros(shape=(N, ))\n\n    def step(self, delta_t):\n        equations = np.zeros(shape=(4 * self.N, 4 * self.N + 1))\n        theta_dd = 0\n        a_xn = theta_dd + self.N\n        a_yn = a_xn + self.N\n        T_n = a_yn + self.N\n        for p in range(0, 4 * self.N, 4):\n            n = p // 4\n            # First equation x_dd\n            equations[p, theta_dd + n] = self.L[n] * math.cos(self.theta[n])\n            equations[p, a_xn + n] = -1.0;\n            if n \u003e 0:\n                equations[p, a_xn + n - 1] = 1\n            equations[p, -1] = self.theta_dot[n]**2 * math.sin(self.theta[n])\n\n            # Second equation y_dd\n            equations[p + 1, theta_dd + n] = -1.0 * self.L[n] * math.sin(self.theta[n])\n            equations[p + 1, a_yn + n] = -1.0\n            if n \u003e 0:\n                equations[p + 1, a_yn + n - 1] = 1.0\n            equations[p + 1, -1] = self.theta_dot[n]**2 * math.cos(self.theta[n])\n\n            # Third equation horizontal tension\n            equations[p + 2, a_xn + n] = self.m[n]\n            equations[p + 2, T_n + n] = math.sin(self.theta[n])\n            if n + 1 \u003c self.N:\n                equations[p + 2, T_n + n + 1] = -1.0 * math.sin(self.theta[n + 1])\n            equations[p + 2, -1] = 0\n\n            # Fourth equation vertical tension\n            equations[p + 3, a_yn + n] = self.m[n]\n            equations[p + 3, T_n + n] = math.cos(self.theta[n])\n            if n + 1 \u003c self.N:\n                equations[p + 3, T_n + n + 1] = -1.0 * math.cos(self.theta[n + 1])\n            equations[p + 3, -1] = self.m[n] * self.gravity\n\n        solution = np.linalg.solve(equations[:, 0:-1], equations[:, -1])\n        self.theta_dot += delta_t * solution[0:self.N]\n        self.theta += delta_t * self.theta_dot\n\n\nclass PhysicalNPendulum(Scene):\n    def construct(self):\n        p = Pendulum(N=2, theta=[math.pi / 2] * 2)\n        scale = 2\n        x_c, y_c = 0, 3\n\n        def get_pendulum(dot_radius=DEFAULT_DOT_RADIUS):\n            points = [[x_c, y_c, 0]] + [[scale * p.L[n] * math.sin(p.theta[n]), -scale * p.L[n] * math.cos(p.theta[n]), 0] for n in range(p.N)]\n            for i in range(1, len(points)):\n                for k in range(3):\n                    points[i][k] += points[i - 1][k]\n            return [ Line(points[i - 1], points[i]) for i in range(1, len(points)) ] + [ Dot(point, radius=dot_radius) for point in points]\n\n        def step(pendulum, dt):\n            for obj in pendulum:\n                pendulum.remove(obj)\n            p.step(dt / 2)\n            for obj in get_pendulum(dot_radius=0.06):\n                pendulum.add(obj)\n\n        pendulum = VGroup()\n        for obj in get_pendulum():\n            pendulum.add(obj)\n        pendulum.add_updater(step)\n        self.add(pendulum)\n        self.wait(5)\n        pendulum.remove_updater(step)\n\n\nparam= \"-v WARNING  --progress_bar None   -r  500,200 --fps=3 --disable_caching PhysicalNPendulum\"\nparamgif= \"-v WARNING  --progress_bar None --format=gif  -r  500,200  --disable_caching PhysicalNPendulum\"\n%manim $param","identifier":"nb-cell-0-05330fc8bf-code","enumerator":"1","html_id":"nb-cell-0-05330fc8bf-code","key":"SpLbpRTCfO"},{"type":"output","id":"hSQKdrN1s6A4nB5v8bP-A","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"\u003cpre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\"\u003eManim Community \u003cspan style=\"color: #008000; text-decoration-color: #008000\"\u003ev0.17.2\u003c/span\u003e\n\n\u003c/pre\u003e\n","content_type":"text/html"},"text/plain":{"content":"Manim Community \u001b[32mv0.\u001b[0m\u001b[32m17.2\u001b[0m\n\n","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"\u003cvideo controls autoplay loop style=\"max-width: 60%;\"  \u003e\n \u003csource src=\"data:video/mp4;base64,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\" type=\"video/mp4\"\u003e\n Your browser does not support the video tag.\n \u003c/video\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cIPython.core.display.Video object\u003e","content_type":"text/plain"}}}],"identifier":"nb-cell-0-05330fc8bf-output","html_id":"nb-cell-0-05330fc8bf-output","key":"MRdGEPo0He"}],"data":{"id":"nb-cell-0-05330fc8bf","type":"notebook-code"},"identifier":"nb-cell-0-05330fc8bf","label":"nb-cell-0-05330fc8bf","html_id":"nb-cell-0-05330fc8bf","key":"d55jwLbfWR"},{"type":"block","position":{"start":{"line":105,"column":0},"end":{"line":106,"column":0}},"children":[{"type":"code","lang":"python","executable":true,"value":"################################################\n# Optimized collection of 2-Pendulum's\n################################################\nclass DoublePendulum():\n    \"\"\" Creates a collection of 2-Pendulums\n        Parameters:\n        theta: np.ndarray with shape (N, 2)\n        lengths (optional): np.ndarray with shape (N, 2) default is all ones\n        masses  (optional): np.ndarray with shape (N, 2) default is all ones\n    \"\"\"\n    def __init__(self, theta, lengths=None, masses=None):\n        self.t = theta\n        self.t_d = np.zeros(theta.shape)\n        self.l = np.ones(theta.shape) if lengths is None else lengths\n        self.m = np.ones(theta.shape) if masses is None else masses\n        self.g = 9.81 # gravity\n\n    def step(self, delta_t, step_size=0.0005):\n        for i in range(math.ceil(delta_t / step_size)):\n            self.smol_step(step_size)\n\n    def smol_step(self, delta_t):\n        m_1, m_2 = self.m[:, 0], self.m[:, 1]\n        t_1, t_2 = self.t[:, 0], self.t[:, 1]\n        l_1, l_2 = self.l[:, 0], self.l[:, 1]\n        t_d1, t_d2 = self.t_d[:, 0], self.t_d[:, 1]\n        bottom = (2 * m_1) + m_2 - (m_2 * np.cos(2 * (t_1 - t_2)))\n        theta_dd1 = (-self.g * (2 * m_1 + m_2) * np.sin(t_1) - m_2 * self.g * np.sin(t_1 - 2 * t_2) - 2 * np.sin(t_1 - t_2) * m_2 * (t_d2**2 * l_2 + t_d1**2 * l_1 * np.cos(t_1 - t_2))) / (l_1 * bottom)\n        theta_dd2 = (2 * np.sin(t_1 - t_2) * (t_d1**2 * l_1 * (m_1 + m_2) + self.g * (m_1 + m_2) * np.cos(t_1) + t_d2**2 * l_2 * m_2 * np.cos(t_1 - t_2))) / (l_2 * bottom)\n        self.t_d[:, 0] += delta_t * theta_dd1\n        self.t_d[:, 1] += delta_t * theta_dd2\n        self.t += delta_t * self.t_d\n\n    def get_nth_pendulum(self, n):\n        return self.t[n, 0], self.t[n, 1]\n\n\nclass Physical2Pendulum(Scene):\n    def construct(self):\n        ps = [0, 3, 0]\n        scale = 2.5\n        angles = True\n        history = defaultdict(lambda: [])\n        theta_hist = defaultdict(lambda: [])\n        theta1 = MathTex(r\"\\theta_1\")\n        theta2 = MathTex(r\"\\theta_2\")\n\n        def mod_clamp(x, low=-math.pi, high=math.pi):\n            return ((x-((high-low)/2)) % (high-low)) + low\n        \n        def lin_scale(x, start, end):\n            return (x - start) / (end - start)\n\n        def get_between(start, end, proportion):\n            return start + (end - start) * proportion\n\n        def get_pendulum(p, pid, tracers=False, color=BLUE, dot_radius=DEFAULT_DOT_RADIUS):\n            t_1, t_2 = p.get_nth_pendulum(0)\n            p0 = [ps[0] + scale * math.sin(t_1), ps[1] - scale * math.cos(t_1), 0]\n            p1 = [p0[0] + scale * math.sin(t_2), p0[1] - scale * math.cos(t_2), 0]\n            x0, x1 = DashedLine([ps[0], ps[1], 0], [ps[0], ps[1] - 1, 0]), DashedLine([p0[0], p0[1], 0], [p0[0], p0[1] - 1, 0])\n            l0, l1 = Line(ps, p0), Line(p0, p1)\n            x0.set_color(color)\n            x1.set_color(color)\n            l0.set_color(color)\n            l1.set_color(color)\n\n            theta_hist[pid].append(np.array([lin_scale(mod_clamp(t_1), -math.pi, math.pi), lin_scale(mod_clamp(t_2), -math.pi, math.pi), 0]))\n            history[pid].append(p1)\n            if len(history[pid]) \u003e 10:\n                history[pid] = history[pid][1:]\n\n            res = [ l0, l1, Dot(ps, radius=dot_radius, color=WHITE), Dot(p0, radius=dot_radius, color=color), Dot(p1, radius=dot_radius, color=color)]\n            if angles:\n                flip0, flip1 = p0[0] \u003c ps[0], p1[0] \u003c p0[0]\n                res += [ x0, x1, Angle(x0, l0, other_angle=flip0), Angle(x1, l1, other_angle=flip1),\n                    MathTex(r\"\\theta_1\").move_to(Angle(x0, l0, other_angle=flip0, radius=0.4 + 3 * SMALL_BUFF).point_from_proportion(0.5)),\n                    MathTex(r\"\\theta_2\").move_to(Angle(x1, l1, other_angle=flip1, radius=0.4 + 3 * SMALL_BUFF).point_from_proportion(0.5))]\n            if tracers:\n                res += [ Line(history[pid][i-1], history[pid][i], color=color) for i in range(1, len(history[pid])) ]\n            return res\n\n\n        def create_pendulum(theta, pid=0, color=BLUE, rate=1, add_updater=True, tracers=True):\n            p = DoublePendulum(theta)\n            pendulum = VGroup()\n            history[pid].clear()\n            for obj in get_pendulum(p, pid, color=color, dot_radius=0.06):\n                pendulum.add(obj)\n\n            def step(pendulum, dt):\n                clear(pendulum)\n                p.step(dt * rate)\n                for obj in get_pendulum(p, pid, color=color, tracers=tracers, dot_radius=0.06):\n                    pendulum.add(obj)\n\n            if add_updater:\n                pendulum.add_updater(step)\n            return p, pendulum, step\n\n        def clear(*objs):\n            for obj in objs:\n                for o in obj:\n                    obj.remove(o)\n\n        def create_pendulum_path(pid, color, s, e):\n            path = VGroup()\n\n            def update(pth, dt):\n                clear(pth)\n                for obj in get_plot_line(pid, s, e, color):\n                    pth.add(obj)\n            path.add_updater(update)\n            return path, update\n\n        def get_plot_line(pid, domain_start, domain_end, color):\n            res = []\n            for i in range(1, len(theta_hist[pid])):\n                p0 = domain_start + theta_hist[pid][i - 1] * (domain_end - domain_start)\n                p1 = domain_start + theta_hist[pid][i] * (domain_end - domain_start)\n                if np.linalg.norm(p1 - p0) \u003c= 4:\n                    res.append(Line(p0, p1, color=color))\n            return res\n\n        def get_color(theta, phi, radius=127, normalize=False):\n            return [(127 + radius * math.cos(phi) * math.sin(theta)) / 255, \n                (127 + radius * math.sin(phi) * math.sin(theta)) / 255,\n                (127 + radius * math.cos(theta)) / 255] if normalize else \\\n            [math.floor(127 + radius * math.cos(phi) * math.sin(theta)), \n                math.floor(127 + radius * math.sin(phi) * math.sin(theta)),\n                math.floor(127 + radius * math.cos(theta))]\n\n        def get_coloring(grid_size):\n            data = [[get_color(get_between(-math.pi, math.pi, i / (grid_size - 1)), get_between(math.pi, -math.pi, j / (grid_size - 1))) for i in range(grid_size)] for j in range(grid_size)]\n            return ImageMobject(np.uint8(data))\n\n        def update_color(object, pid, add_updater=True):\n            def update(obj, dt):\n                if len(theta_hist[pid]) \u003e= 1:\n                    obj.set_fill(rgb_to_color(get_color(get_between(-math.pi, math.pi, theta_hist[pid][-1][0]), get_between(-math.pi, math.pi, theta_hist[pid][-1][1]), normalize=True)))\n            if add_updater:\n                object.add_updater(update)\n            return update\n        \n        def update_circle_pos(obj, pid, s, e, add_updater=True):\n            def update(my_obj, dt):\n                if len(theta_hist[pid]) \u003e= 1:\n                    my_obj.move_to(s + theta_hist[pid][-1] * (e - s))\n            if add_updater:\n                obj.add_updater(update)\n            return update\n\n\n        text1 = Tex(\"This is a double pendulum.\").move_to([0, -3, 0])\n        text2 = Tex(\"Its behavior is chaotic.\").move_to([0, -3, 0])\n        text3 = Tex(r\"This means that small changes to the initial conditions \\\\ result in wildly different behaviors.\").move_to([0, -3, 0])\n        text4 = Tex(\"Let's see this happen.\").move_to([0, -3, 0])\n        text5 = Tex(r\"Let's do this again, but plot \\\\ how the angles of each \\\\ pendulum change over time.\").to_corner(LEFT * 0.5 + DOWN)\n        text6 = Tex(r\"Let's assign a unique color to each point on our plot.\").move_to([0, -3.5, 0])\n        text7 = Tex(r\"The pendulum's state $(\\theta_1, \\theta_2)$ can be mapped to a color\").move_to([0, -3.5, 0])\n\n        p, pendulum, s = create_pendulum(np.ones((1, 2)) * math.pi / 2.0, BLUE, add_updater=False)\n        self.add(pendulum)\n        self.play( Create(pendulum) )\n        self.play( Create(text1) )\n        pendulum.add_updater(s)\n        self.wait(4)\n\n        clear(pendulum)\n        self.play( Transform(text1, text2) )\n        self.wait(5)\n\n        clear(pendulum)\n        self.play( Transform(text1, text3) )\n        self.wait(6)\n        pendulum.remove_updater(s)\n        self.play(FadeOut(pendulum))\n        self.remove(pendulum)\n\n        #######################################################################\n        angles = False\n        p1, pendulum1, s1 = create_pendulum(np.ones((1, 2)) * math.pi / 2.0, pid=1, color=BLUE, add_updater=False)\n        p2, pendulum2, s2 = create_pendulum(np.ones((1, 2)) * math.pi / 1.9, pid=2, color=ORANGE, add_updater=False)\n        self.add(pendulum1, pendulum2)\n        self.play( Create(pendulum1), Create(pendulum2), Transform(text1, text4) )\n        pendulum1.add_updater(s1)\n        pendulum2.add_updater(s2)\n        self.wait(15)\n        pendulum1.remove_updater(s1)\n        pendulum2.remove_updater(s2)\n        self.play(FadeOut(pendulum1), FadeOut(pendulum2))\n        self.remove(pendulum1, pendulum2)\n\n        #######################################################################\n        plot = Square(side_length=6.5).to_corner(RIGHT + UP)\n        t1, t2 = MathTex(r\"\\theta_1\").shift(3.3611 * RIGHT + 3.5 * DOWN), MathTex(r\"\\theta_2\").move_to([-0.3, 0.25, 0])\n        p_pi1, m_pi1 = MathTex(r\"\\pi\").move_to([-0.2, 3.5, 0]), MathTex(r\"-\\pi\").move_to([0.1111, -3.25, 0])\n        p_pi2 = MathTex(r\"\\pi\").move_to([6.61111, -3.25, 0])\n        self.add(plot, t1, t2)\n        self.play( Transform(text1, text5), Create(plot),\n            Create(t1), Create(t2),\n            Create(p_pi1), Create(m_pi1),\n            Create(p_pi2)\n        )\n\n        p_start = np.array([0.11111, -3, 0])\n        p_end = np.array([6.6111, 3.5, 0])\n        ps = [-3.5, 3, 0]\n        scale = 1.7\n        p1, pendulum1, s1 = create_pendulum(np.ones((1, 2)) * math.pi / 2.0, pid=3, color=BLUE, add_updater=False)\n        p2, pendulum2, s2 = create_pendulum(np.ones((1, 2)) * math.pi / 1.9, pid=4, color=ORANGE, add_updater=False)\n        path1, p_s1 = create_pendulum_path(3, BLUE, p_start, p_end)\n        path2, p_s2 = create_pendulum_path(4, ORANGE, p_start, p_end)\n        self.add(pendulum1, pendulum2, path1, path2)\n        self.play( Create(pendulum1) )\n        self.wait(1)\n        pendulum1.add_updater(s1)\n        pendulum2.add_updater(s2)\n        self.wait(18)\n        pendulum1.remove_updater(s1)\n        pendulum2.remove_updater(s2)\n        path1.remove_updater(p_s1)\n        path2.remove_updater(p_s2)\n        self.play(FadeOut(pendulum1), FadeOut(pendulum2), FadeOut(path1), FadeOut(path2))\n        self.play(Transform(text1, text6), FadeOut(p_pi1), FadeOut(p_pi2), FadeOut(m_pi1), FadeOut(t1), FadeOut(t2))\n        self.remove(pendulum1, pendulum2, path1, path2)\n        \n        #######################################################################\n        angles = True\n        grid_size = 878\n        ps = [-3.5, 3, 0]\n        scale = 1.7\n        p, pendulum, s = create_pendulum(np.ones((1, 2)) * math.pi / 2.0, pid=5, color=BLUE, add_updater=False, tracers=False)\n        coloring = get_coloring(grid_size).scale(270 / grid_size * 6.45 / 2).to_corner(LEFT + UP)\n        text_mapping = MathTex(r\"(\\theta_1, \\theta_2) \\to \").to_corner(LEFT * 2 + DOWN * 2)\n        square_fill = Square(0.5, fill_opacity=1).move_to([-3.5, -2.75, 0])\n        square_fill.set_fill(rgb_to_color(get_color(math.pi / 2, math.pi / 2, normalize=True)))\n        lens = Circle(radius=0.3, fill_opacity=1, color=WHITE).move_to(p_start + (p_end - p_start) * np.array([lin_scale(mod_clamp(math.pi / 2), -math.pi, math.pi), lin_scale(mod_clamp(math.pi / 2), -math.pi, math.pi), 0]))\n        lens.set_fill(rgb_to_color(get_color(math.pi / 2, math.pi / 2, normalize=True)))\n        self.wait(1)\n        self.add(coloring)\n        self.play( coloring.animate.move_to([0.11111 + 6.5 / 2, -3 + 6.5 / 2, 0]))\n        self.wait(3)\n        self.add(pendulum)\n        self.play( Create(pendulum), Transform(text1, text7))\n        self.wait(2)\n        self.play( Create(text_mapping), Create(square_fill), Create(lens) )\n        self.wait(2)\n        sf_u = update_color(square_fill, 5, add_updater=True)\n        l_u = update_color(lens, 5, add_updater=True)\n        l_u2 = update_circle_pos(lens, 5, p_start, p_end, add_updater=True)\n        pendulum.add_updater(s)\n        self.wait(20)\n        pendulum.remove_updater(s)\n        lens.remove_updater(l_u)\n        lens.remove_updater(l_u2)\n        square_fill.remove_updater(sf_u)\n        self.play( FadeOut(lens), FadeOut(square_fill), FadeOut(pendulum), FadeOut(coloring), FadeOut(text_mapping), FadeOut(text1), FadeOut(plot))\n        self.remove(lens, square_fill, pendulum, coloring, text_mapping, text1, plot)\n        self.wait(1)\n\n\n\nclass FractalPlot(Scene):\n    def construct(self):\n        grid_size = 945\n        angle_domain = [-math.pi, math.pi]\n        angle_from_proportion = lambda x: (angle_domain[1] - angle_domain[0]) * x + angle_domain[0]\n        theta = np.ones((grid_size**2, 2))\n        for i in range(grid_size**2):\n            x, y = i % grid_size, i // grid_size\n            theta[i, 0] = angle_from_proportion(x / grid_size)\n            theta[i, 1] = angle_from_proportion(y / grid_size)\n        p = DoublePendulum(theta)\n\n        def get_color(theta, phi, radius=127):\n            return [math.floor(127 + radius * math.cos(phi) * math.sin(theta)), \n                math.floor(127 + radius * math.sin(phi) * math.sin(theta)),\n                math.floor(127 + radius * math.cos(theta))]\n\n        def get_fractal():\n            return np.uint8([[get_color(p.t[j * grid_size + i, 0], p.t[j * grid_size + i, 1]) for i in range(grid_size)] for j in range(grid_size)])\n\n        def step(fractal, dt):\n            p.step(dt)\n            fractal.pixel_array = np.array(get_fractal())\n            fractal.change_to_rgba_array()\n\n        text1 = Tex(\"Now, lets see how every possible pendulum evolves together.\").move_to([0, -3.5, 0])\n        text2 = Tex(\"Every pixel represents the state of a unique pendulum\").move_to([0, -3.5, 0])\n        text3 = Tex(\"We can update every pendulum and see how the states change.\").move_to([0, -3.5, 0])\n        # One unit is 270 px\n        fractal = ImageMobject(get_fractal()).scale(270 / grid_size * 7 / 2).to_edge(UP * 0.25)\n        self.add(fractal)\n        self.add(text1)\n        self.wait(5)\n        self.play( Transform(text1, text2) )\n        self.wait(5)\n        self.play( Transform(text1, text3) )\n        self.wait(2)\n        fractal.add_updater(step)\n        self.wait(30)\n        fractal.remove_updater(step)\n        self.play(FadeOut(fractal), FadeOut(text1))\n        self.clear()\n        self.wait(3)\n\n\nparam= \"-v WARNING  --progress_bar None   -r  500,200 --fps=3 --disable_caching Physical2Pendulum\"\n# paramgif= \"-v WARNING  --progress_bar None --format=gif  -r  500,200  --disable_caching PhysicalNPendulum\"\n%manim $param","identifier":"nb-cell-1-f9b4f66a5a-code","enumerator":"2","html_id":"nb-cell-1-f9b4f66a5a-code","key":"DRl4pcSGry"},{"type":"output","id":"6fDFNNPJWKhNrkU194VDl","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"00df988168167789ae500dfd5aebc834","path":"/physicsmyst/build/00df988168167789ae500dfd5aebc834.html"},"text/plain":{"content":"\u003cIPython.core.display.Video object\u003e","content_type":"text/plain"}}}],"identifier":"nb-cell-1-f9b4f66a5a-output","html_id":"nb-cell-1-f9b4f66a5a-output","key":"Y2sDd1R8l0"}],"data":{"id":"nb-cell-1-f9b4f66a5a","type":"notebook-code"},"identifier":"nb-cell-1-f9b4f66a5a","label":"nb-cell-1-f9b4f66a5a","html_id":"nb-cell-1-f9b4f66a5a","key":"DuTfSQiKwd"}],"key":"NhqAo5x8TB"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"media-notebook","url":"/media-notebook","group":"Minimal Example"},"next":{"title":"wave","url":"/wave","group":"Minimal Example"}}},"domain":"http://localhost:3000"}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":false,"v2_headers":true,"v2_meta":false,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/physicsmyst/build/manifest-2FF8542C.js";
import * as route0 from "/physicsmyst/build/root-SUHMEADM.js";
import * as route1 from "/physicsmyst/build/routes/$-67EP337V.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/physicsmyst/build/entry.client-ORTQVTK7.js");</script></body></html>